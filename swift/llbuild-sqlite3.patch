From 950be099ad42529a98ef561f098bf5cc082c4dfe Mon Sep 17 00:00:00 2001
From: Osama Albahrani <54853250+osalbahr@users.noreply.github.com>
Date: Fri, 11 Jul 2025 00:28:39 +0300
Subject: [PATCH] [PATCH] Update workaround failing to find Homebrew sqlite3 on
 Linux

- For https://github.com/Homebrew/homebrew-core/pull/229223

Co-Authored-By: Bo Anderson <mail@boanderson.me>
---
 Package.swift | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/Package.swift b/Package.swift
index 28ce8e24..167f249a 100644
--- a/Package.swift
+++ b/Package.swift
@@ -335,12 +335,12 @@ package.targets.first { $0.name == "llbuildBasic" }?.linkerSettings = [
 // FIXME: when the SupportedPlatforms availability directive is updated and
 // the platform port is in sync with this directive, these conditions can
 // be folded up with .when(platforms:_) clauses.
-#if os(FreeBSD) || os(OpenBSD)
+#if os(Linux)
 package.targets.filter({ $0.name == "llbuildCore" || $0.name == "llbuildCoreTests" }).forEach {
-    $0.cSettings = [.unsafeFlags(["-I/usr/local/include"])]
+    $0.cSettings = [.unsafeFlags(["-I@@HOMEBREW_PREFIX@@/opt/sqlite3/include"])]
     $0.linkerSettings = [
         .linkedLibrary("sqlite3"),
-        .unsafeFlags(["-L/usr/local/lib"])
+        .unsafeFlags(["-L@@HOMEBREW_PREFIX@@/opt/sqlite3/lib"])
     ]
 
 }
-- 
2.39.5 (Apple Git-154)

